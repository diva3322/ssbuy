<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŠæˆ²è©³æƒ…</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
	<script src="script.js?ver=2"></script>

</head>
<body class="game-detail">
	<div class="sidebar">
    	<!-- æ–°å¢çš„ LOGO -->
    	<a href="index.html">
	<img src="logo.jpg" alt="å…¬å¸ LOGO" class="company-logo">
    	</a>
        <ul>
            <li><a href="new-games.html">æ–°ä¸ŠéŠæˆ²</a></li>
            <li><a href="all-games.html">æ‰€æœ‰éŠæˆ²</a></li>
            <li><a href="event.html">ç‰¹æƒ æ´»å‹•</a></li>
        </ul>
    </div>

<div class="main-content">
    <!-- ç¬¬ä¸€å€‹å€å¡Š: éŠæˆ²è³‡è¨Š + å„²å€¼é ˆçŸ¥ -->
<div class="info-box">
    <img id="gameLogo" src="default.jpg" alt="éŠæˆ² LOGO" class="game-logo">
    <h2 id="gameTitle">æœªçŸ¥éŠæˆ²</h2>
    <h3>å„²å€¼é ˆçŸ¥</h3>
    <p id="gameDescription">
    è«‹ç¢ºèªå¥½å¸³æˆ¶è³‡æ–™å’Œæ‰€è³¼è²·å•†å“ç„¡èª¤å†çµå¸³ï¼Œæ„Ÿè¬æ‚¨çš„æ”¯æŒã€‚<br>
    ç•™è¨€ç‰ˆè«‹æ–¼å¸³æˆ¶ > è¨‚å–®å…§ç•™è¨€ã€‚<br>
    <br>
    æ­¡è¿åŠ å…¥ LINE@ ç”Ÿæ´»åœˆ IDï¼š@ssbuy (@ä¹Ÿè¦è¼¸å…¥)ã€‚<br>
    æˆ‘å€‘å°‡ä¸å®šæ™‚èˆ‰è¾¦æŠ½å„ªæƒ åˆ¸èˆ‡é»å¡æ´»å‹•å“¦!
    </p>
    <div class="social-media">
        <h3>å®˜æ–¹ç¤¾äº¤åª’é«”</h3>
        <p>
            <a href="#" target="_blank">Facebook</a> |
            <a href="#" target="_blank">Instagram</a> |
            <a href="#" target="_blank">å®˜æ–¹ç¶²ç«™</a>
        </p>
    </div>
</div>

<div class="products-box">
    <h3>é¸æ“‡å•†å“</h3>
    <div id="productList"></div>
</div>

<div class="login-box">
    <h3>éŠæˆ²ç™»å…¥è³‡è¨Š</h3>
    <input type="text" id="gameName" readonly>
    <select id="loginMethod">
        <option>å®˜æ–¹ç™»å…¥</option>
        <option>FBç™»å…¥</option>
        <option>Googleç™»å…¥</option>
        <option>Xç™»å…¥</option>
        <option>Lineç™»å…¥</option>
        <option>å¼•ç¹¼ç¢¼ç™»å…¥</option>
        <option>AppleIDç™»å…¥</option>
    </select>
    <input type="text" id="account" placeholder="ç™»å…¥å¸³è™Ÿ">
    <input type="password" id="password" placeholder="ç™»å…¥å¯†ç¢¼">
    <input type="text" id="server" placeholder="ä¼ºæœå™¨åç¨±">
    <input type="text" id="characterName" placeholder="éŠæˆ²è§’è‰²åç¨±">
    <textarea id="selectedProducts" readonly>è³¼è²·å•†å“</textarea>
    <p id="totalAmount" class="total-price">çµå¸³ç¸½é‡‘é¡: NT$0</p>
    <a href="http://lin.ee/s7ueHCZ" class="checkout-btn">é€å‡ºçµå¸³</a>
</div>

<footer>
    <div style="display: flex; justify-content: center; gap: 40px;">
        <a href="purchase-guide.html">è³¼è²·æ•™å­¸</a> |
        <a href="contact.html">è¯çµ¡æˆ‘å€‘</a> |
        <a href="disclaimer.html">å…è²¬æ¢æ¬¾</a> |
        <a href="terms-of-service.html">æœå‹™æ¢æ¬¾</a> |
        <a href="account-verification.html">å¸³æˆ¶èªè­‰</a>
    </div>
</footer>

    <script>
        const gameProducts = {
            "å·”å³°æ¥µé€Ÿ": [
                { name: "é‘½çŸ³ 60é¡†", price: 33 },
                { name: "é‘½çŸ³ 300é¡†", price: 170 },
                { name: "é‘½çŸ³ 680é¡†", price: 330 },
                { name: "é‘½çŸ³ 980é¡†", price: 490 },
                { name: "é‘½çŸ³ 1280é¡†", price: 670 },
                { name: "é‘½çŸ³ 1980é¡†", price: 990 },
                { name: "é‘½çŸ³ 3280é¡†", price: 1690 },
                { name: "é‘½çŸ³ 6480é¡†", price: 3290 },
                { name: "é«˜ç´šåˆç´„", price: 330 },
                { name: "ç‰¹ç´šåˆç´„", price: 670 },
                { name: "åˆç´„çµ„åˆç¦®åŒ…", price: 1690 },
                { name: "æœˆå¡", price: 170 }
            ],
            "åŸç¥": [
                { name: "å‰µä¸–çµæ™¶ 60é¡†", price: 90 },
                { name: "å‰µä¸–çµæ™¶ 300é¡†", price: 450 },
                { name: "ç©ºæœˆç¥ç¦", price: 170 }
            ],
            "å‚³èªªå°æ±º": [
                { name: "é»åˆ¸ 100", price: 95 },
                { name: "é»åˆ¸ 500", price: 450 },
                { name: "æˆ°ä»¤é€²éšå¡", price: 330 }
            ]
        };

document.addEventListener("DOMContentLoaded", async () => {
    const params = new URLSearchParams(window.location.search);
    const gameName = params.get("game") ? decodeURIComponent(params.get("game")) : "æœªçŸ¥éŠæˆ²";

    console.log("ç•¶å‰éŠæˆ²åç¨±:", gameName); // ğŸ” æª¢æŸ¥æ˜¯å¦æˆåŠŸå–å¾—éŠæˆ²åç¨±

    document.getElementById("gameName").value = gameName; // âœ… æŠŠéŠæˆ²åç¨±å¡«å…¥è¼¸å…¥æ¡†

    try {
        const response = await fetch("games.json"); // è®€å– JSON æª”æ¡ˆ
        if (!response.ok) throw new Error("è¼‰å…¥ JSON å¤±æ•—");
        const gamesData = await response.json();

        if (gamesData[gameName]) {
            loadGameDetails(gameName, gamesData[gameName]); // è¼‰å…¥éŠæˆ²å…§å®¹
        } else {
            document.getElementById("gameTitle").textContent = "æ‰¾ä¸åˆ°éŠæˆ²";
        }
    } catch (error) {
        console.error("ç„¡æ³•è®€å–éŠæˆ²æ•¸æ“š:", error);
    }
});

function loadGameDetails(gameName, game) {
    document.getElementById("gameTitle").textContent = gameName;
    document.getElementById("gameLogo").src = game.logo;
    document.getElementById("gameDescription").textContent = game.description;

    // âœ… ç”Ÿæˆç¤¾äº¤åª’é«”é€£çµ
    const socialContainer = document.querySelector(".social-media p");
    socialContainer.innerHTML = Object.entries(game.social)
        .map(([name, url]) => `<a href="${url}" target="_blank">${name}</a>`)
        .join(" | ");

    // âœ… è¼‰å…¥å•†å“
    loadProducts(game.products);
}

function loadProducts(products) {
    console.log("è¼‰å…¥çš„ç”¢å“:", products);
    const productContainer = document.getElementById("productList");
    productContainer.innerHTML = ""; // æ¸…ç©ºç¾æœ‰å•†å“

    if (products.length === 0) {
        productContainer.innerHTML = "<div>ç›®å‰æ²’æœ‰å¯è³¼è²·çš„å•†å“</div>";
        return;
    }

    products.forEach(product => {
        console.log("è™•ç†ç”¢å“:", product);
        const row = document.createElement("div");
        row.classList.add("product-item");

        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.value = product.price;
        checkbox.dataset.name = product.name;
        checkbox.addEventListener("change", updateTotal);

        const name = document.createElement("span");
        name.classList.add("product-name");
        name.textContent = product.name;

        // âœ… è®“ NT$ å’Œåƒ¹æ ¼é€£åœ¨ä¸€èµ·
        const price = document.createElement("span");
        price.classList.add("price-container");
        price.textContent = `NT$${product.price}`;

        row.appendChild(checkbox);
        row.appendChild(name);
        row.appendChild(price);

        productContainer.appendChild(row);
    });
}



function updateTotal() {
    let total = 0;
    let selectedProducts = [];

    document.querySelectorAll("#productList input[type='checkbox']:checked").forEach(checkbox => {
        total += parseInt(checkbox.value);
        selectedProducts.push(checkbox.dataset.name);
    });

    const selectedProductsField = document.getElementById("selectedProducts");
    selectedProductsField.value = selectedProducts.length > 0 ? selectedProducts.join(" + ") : "è³¼è²·å•†å“";

    // âœ… è‡ªå‹•èª¿æ•´ textarea é«˜åº¦
    selectedProductsField.style.height = "auto";
    selectedProductsField.style.height = Math.min(selectedProductsField.scrollHeight, 120) + "px";

    document.getElementById("totalAmount").innerHTML = `<strong>çµå¸³ç¸½é‡‘é¡: NT$${total}</strong>`;
}
document.addEventListener("DOMContentLoaded", async () => {
    const params = new URLSearchParams(window.location.search);
    const gameName = params.get("game") ? decodeURIComponent(params.get("game")) : "æœªçŸ¥éŠæˆ²";

    try {
        const response = await fetch("games.json"); // è®€å– JSON æª”æ¡ˆ
        if (!response.ok) throw new Error("è¼‰å…¥ JSON å¤±æ•—");
        const gamesData = await response.json();

        if (gamesData[gameName]) {
            loadGameDetails(gameName, gamesData[gameName]); // è¼‰å…¥éŠæˆ²å…§å®¹
        } else {
            document.getElementById("gameTitle").textContent = "æ‰¾ä¸åˆ°éŠæˆ²";
        }
    } catch (error) {
        console.error("ç„¡æ³•è®€å–éŠæˆ²æ•¸æ“š:", error);
    }
});

function loadGameDetails(gameName, game) {
    document.getElementById("gameTitle").textContent = gameName;
    document.getElementById("gameLogo").src = game.logo;
    document.getElementById("gameDescription").textContent = game.description;

    // âœ… ç”Ÿæˆç¤¾äº¤åª’é«”é€£çµ
    const socialContainer = document.querySelector(".social-media p");
    socialContainer.innerHTML = Object.entries(game.social)
        .map(([name, url]) => `<a href="${url}" target="_blank">${name}</a>`)
        .join(" | ");

    // âœ… è¼‰å…¥å•†å“
    loadProducts(game.products);
}

function loadProducts(products) {
    const productContainer = document.getElementById("productList");
    productContainer.innerHTML = ""; // æ¸…ç©ºç¾æœ‰å•†å“

if (products.length === 0) {
    productContainer.innerHTML = "<div>ç›®å‰æ²’æœ‰å¯è³¼è²·çš„å•†å“</div>";
    return;
}

    products.forEach(product => {
        const row = document.createElement("div");

        const checkboxCell = document.createElement("td");
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.value = product.price;
        checkbox.dataset.name = product.name;
        checkbox.addEventListener("change", updateTotal);
        checkboxCell.appendChild(checkbox);

        const nameCell = document.createElement("td");
        nameCell.textContent = product.name;

        const priceCell = document.createElement("td");
        priceCell.textContent = `NT$${product.price}`;
        priceCell.classList.add("price");

        row.appendChild(checkboxCell);
        row.appendChild(nameCell);
        row.appendChild(priceCell);

        productContainer.appendChild(row);
    });
}

function updateTotal() {
    let total = 0;
    let selectedProducts = [];

    document.querySelectorAll("#productList input[type='checkbox']:checked").forEach(checkbox => {
        total += parseInt(checkbox.value);
        selectedProducts.push(checkbox.dataset.name);
    });

    const selectedProductsField = document.getElementById("selectedProducts");
    selectedProductsField.value = selectedProducts.length > 0 ? selectedProducts.join(" + ") : "è³¼è²·å•†å“";

    // âœ… è‡ªå‹•èª¿æ•´ textarea é«˜åº¦
    selectedProductsField.style.height = "auto";
    selectedProductsField.style.height = Math.min(selectedProductsField.scrollHeight, 120) + "px";

    document.getElementById("totalAmount").innerHTML = `<strong>çµå¸³ç¸½é‡‘é¡: NT$${total}</strong>`;
}

    <script defer src="script.js"></script>
</body>
</html>
